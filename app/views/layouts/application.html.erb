<!DOCTYPE html>
<html>
<head>
  <title>JD Rampage - The JDHS Student Newspaper</title>
  <%= stylesheet_link_tag 'blueprint/screen', :media => 'screen, projection' %>
  <%= stylesheet_link_tag 'blueprint/print', :media => 'print' %>
	<!--[if IE]><%= stylesheet_link_tag 'blueprint/ie', :media => 'screen, projection' %><![endif]-->
	<%= stylesheet_link_tag 'scaffold','application','global','articles','sections','pages'%>
	<%= javascript_include_tag "jquery-1.4.2.min.js","jquery-ui-1.8.4.custom.min.js" %>
	<%= javascript_include_tag :defaults %>
  <%= csrf_meta_tag %> <!-- prevents cross-site request forgery -->
</head>
<body>
<div id="header">
	<%= link_to "rampage", '/', :id => 'top_text' %>
	<div id="top_subtext">The JDHS Student Newspaper</div>
	<ul id="section_header_list">
		<% for section in Section.all %>
			<li class="section_item"><%= link_to section.name, section_path(section) %></li>
		<% end %>
	</ul>
	<% if current_user %>
		<div id="login_area">
			Logged in as <b><%= current_user.login %></b> |
			<%= link_to 'Frontside', root_path, :style=>"font-weight:bold" %> | 
			<%= link_to 'Backside', backside_path %> | 
			<%= link_to 'Logout', logout_path %>
		</div>
	<% end %>
</div>
<hr>
<div class="container" id="main">
	<div id="flashes">
		<% if flash[:notice] %>
			<div id='notice'><%= flash[:notice] %></div>
		<% end %>
	</div>
	<div class="span-3 colborder" id="left_sidebar">
		<h6>Sidebar content 1</h6>
		<% Article.all.sample(5).each do |article| %>
			<%= render :partial => "articles/article_no_image_preview", :locals => { :article => article } %>
		<% end %>
	</div>
	<div class="span-14 colborder">
		<%= yield %>
	</div>
	<div class="span-5 last" id="right_sidebar"> <!--keep span sum to < 23-->
		<h6>Sidebar content 2</h6>
		<% Article.all.sample(5).each do |article| %>
			<% if rand(2) == 0 %>
				<%= render :partial => "articles/article_sidebar_image_preview", :locals => { :article => article } %>
			<% else %>
				<%= render :partial => "articles/article_no_image_preview", :locals => { :article => article } %>
			<% end%>
		<% end %>
	</div>
</div>
<hr>
<div id="footer">
	<ul id="pages_row">
		<% Page.all.each do |page| %>
			<%= content_tag_for :li, page do %>
				<%= link_to page.title, page %>
			<% end %>
		<% end %>
	</ul>
	
	<% unless logged_in? %>
	<div class="right">
		<a href="#" id="login_activator">Login</a>
		<div id="login_form" style="display:none">
			<%= render :partial => "user_sessions/new" %>
		</div>
	</div>
	<% end %>
</div>

</body>
</html>
